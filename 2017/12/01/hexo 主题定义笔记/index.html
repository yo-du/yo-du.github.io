<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="探寻设计的尺度"><title>Hexo博客主题定制笔记 | 有度</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="header-limit"><div class="site-name"><h1 class="hidden">Hexo博客主题定制笔记</h1><a class="logo-brand" href="/." rel="home"><img class="logo nofancybox" src="/img/logo.svg" alt="yodu"></a></div><div id="nav-menu"><a href="/."><i class="fa null"> 首页</i></a><a href="/categories/设计/"><i class="fa null"> 设计</i></a><a href="/categories/编程/"><i class="fa null"> 编程</i></a><a href="/categories/随笔/"><i class="fa null"> 随笔</i></a><a href="/about/"><i class="fa null"> 关于</i></a></div></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Hexo博客主题定制笔记</h1><div class="post-meta">2017-12-01<span class="category"><a href="/categories/编程/">编程</a></span></div><div class="clear"><div class="toc-article" id="toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#主题设计"><span class="toc-text">主题设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主页缩略图布局"><span class="toc-text">主页缩略图布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导航栏自适应"><span class="toc-text">导航栏自适应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hexo-变量"><span class="toc-text">hexo 变量</span></a></li></ol></div></div><div class="post-content"><p><img src="/-media/hexo 主题定义笔记/image-20190508201458964.png" alt="image-20190508201458964"></p>
<p>自己动手制作博客主题应该是每个设计师的心愿，别人的模板总是不太满意，趁着春节放假折腾一下，顺便学习一下网页编程的技术：pug模板语言，scss 语言，flex 布局，以及响应式的编程等等。这里记录一下开发过程中的要点和心得。</p>
<p>博客基于hexo搭建，可以把很方便的将Markdown的文章转换成博客页面，以前写过hexo的搭建笔记，可以看这里 ：<a href="http://yodu.xyz/2017/08/10/hexo博客搭建全记录——有度博客/">有度博客诞生记</a></p>
<h3 id="主题设计"><a href="#主题设计" class="headerlink" title="主题设计"></a>主题设计</h3><p>本主题在<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">maupassant-hexo</a> 的基础上进行开发和重新设计，主要修改如下：</p>
<ol>
<li>主页布局由列表改成缩略图宫格显示，展示图片和文章内容；</li>
<li>精简版面，去掉侧栏的搜索、分类、标签等目前用处不大的东西；</li>
<li>顶栏导航直接显示文章分类；</li>
<li>响应式布局，适配桌面和移动设备屏幕；</li>
<li>细节的设计优化</li>
</ol>
<p>下面总结一下主题定制过程中用到的关键技术要点</p>
<h3 id="主页缩略图布局"><a href="#主页缩略图布局" class="headerlink" title="主页缩略图布局"></a>主页缩略图布局</h3><h4 id="布局结构"><a href="#布局结构" class="headerlink" title="布局结构"></a>布局结构</h4><p>通过flex实现宫格平铺布局：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父级</span></span><br><span class="line"><span class="selector-class">.content-list</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//子级</span></span><br><span class="line"><span class="selector-class">.content-list</span> <span class="selector-class">.post-list</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">33.333333333333336%</span>; <span class="comment">//实现横向3等分</span></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column; <span class="comment">//卡片中的内容纵向排布</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;  <span class="comment">//使下方溢出的摘要文字隐藏</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="图片自适应裁剪"><a href="#图片自适应裁剪" class="headerlink" title="图片自适应裁剪"></a>图片自适应裁剪</h4><p>在浏览器宽度变化时，图片需要对应缩放，同时需要保证图片比例不变。</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父级</span></span><br><span class="line"><span class="selector-class">.thumb-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  	<span class="comment">//实现等比例缩放：padding的百分比基于宽度，表示高度是宽度的56%</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">56%</span> <span class="number">0</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//子级</span></span><br><span class="line"><span class="selector-class">.thumb-wrap</span> <span class="selector-class">.thumb</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="selector-tag">object</span>-fit: cover; <span class="comment">//让图片居中充满边框</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="缩略图的显示"><a href="#缩略图的显示" class="headerlink" title="缩略图的显示"></a>缩略图的显示</h4><p>本来想直接取文章的第一张图片作为首页缩略图，不过考虑到第一张图片不一定好看，所以采用在文章的配置信息（Front-matter）中指定缩略图的方式</p>
<p>可在markdown文件的头部使用yaml语言编写配置信息，下面的thumbnail就是缩略图的链接，在代码中使用<code>post.thumbnail</code>引用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: 笔记名称</span><br><span class="line">date: 2019-02-08 09:25:14</span><br><span class="line">category: 分类</span><br><span class="line">tags: 标签</span><br><span class="line">thumbnail: http://ovapng3dw.bkt.clouddn.com/hexo主题定义笔记/image.jpg</span><br><span class="line">description: &quot;文章摘要&quot;</span><br></pre></td></tr></table></figure>
<p>配置信息的变量名称可自行定义，都可使用<code>post.varName</code> 引用。</p>
<h4 id="文章摘要"><a href="#文章摘要" class="headerlink" title="文章摘要"></a>文章摘要</h4><p>文章摘要可在正文中添加<code>&lt;!--more--&gt;</code>标记，代码中通过post.excerpt变量引用；或者在文章的配置信息中增加description字段。</p>
<h3 id="导航栏自适应"><a href="#导航栏自适应" class="headerlink" title="导航栏自适应"></a>导航栏自适应</h3><p>为了适配不同的屏幕宽度，导航栏有以下3种状态</p>
<p>1.桌面大屏：导航栏与内容等宽居中，而不是logo和标签跑到屏幕两侧；</p>
<p>2.平板中屏：导航栏跟随屏幕缩小；</p>
<p>3.手机小屏：导航栏的logo和标签分2行居中显示；</p>
<p><img src="/-media/hexo 主题定义笔记/Untitled-9792429.gif" alt="Untitled"></p>
<h5 id="实现方式："><a href="#实现方式：" class="headerlink" title="实现方式："></a>实现方式：</h5><p>在header中增加一层来限制logo和标签栏的距离，通过flex-basis属性来设定基础宽度，当小于该宽度时，会自动缩小两者之间的距离；</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center; <span class="comment">//使下面的子级居中显示；</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">40px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.header-limit</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between; <span class="comment">//使logo和标签栏分居两侧</span></span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">1130px</span>; <span class="comment">//限制logo和标签栏的距离</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面整理了hexo的常用变量形式，后续陆续增添。</p>
<h3 id="hexo-变量"><a href="#hexo-变量" class="headerlink" title="hexo 变量"></a>hexo 变量</h3><h4 id="post-excerpt"><a href="#post-excerpt" class="headerlink" title="post.excerpt"></a>post.excerpt</h4><p>在文中添加<code>&lt;!--more--&gt;</code>标记后，在标记前的部分就<code>post.excerpt</code> ，作为的文章摘要；page.more是标记后的部分；</p>
<h4 id="文章Front-matter变量"><a href="#文章Front-matter变量" class="headerlink" title="文章Front-matter变量"></a>文章Front-matter变量</h4><p>可在markdown文件的头部使用yaml语言编写配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 笔记名称</span><br><span class="line">date: 2019-02-08 09:25:14</span><br><span class="line">category: 分类</span><br><span class="line">tags: 标签</span><br><span class="line">thumbnail: http://ovapng3dw.bkt.clouddn.com/hexo主题定义笔记/image.jpg</span><br><span class="line">description: &quot;文章摘要&quot;</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>使用<code>post.varName</code> 引用，如 <code>post.description</code></p>
<h4 id="config-yml中的变量"><a href="#config-yml中的变量" class="headerlink" title="_config.yml中的变量"></a>_config.yml中的变量</h4><p>主题的根目录中包含_config.yml配置文件，可在其中定义变量进行引用，如</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_thumb:</span> <span class="string">images/default.jpg</span>  <span class="comment"># source中的相对路径</span></span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/hexo/">hexo</a></div><div class="post-nav"><a class="pre" href="/2017/12/23/Electron笔记/">Electron 学习笔记</a><a class="next" href="/2017/12/01/javascript学习笔记/">javascript学习笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yodu.xyz"></form></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">有度.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></div></div></div><a id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>